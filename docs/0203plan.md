# 2026년 2월 3일 작업 기록

## 개요
서울 축제 지도(SeoulFestivalMap) 프로젝트 배포 준비 및 빌드 에러 수정

---

## 1. 완료된 작업 (Phase 1-5)

### 코드 레벨 완료

| 파일 | 내용 |
|------|------|
| `vercel.json` | API rewrites, serverless functions 설정 |
| `api/schema.sql` | users, favorites, reviews 테이블 + RLS |
| `api/lib/supabase.ts` | Supabase 클라이언트 |
| `api/lib/auth.ts` | JWT, bcrypt 인증 |
| `.github/workflows/data-collection.yml` | 데이터 수집 자동화 |

### 외부 서비스 설정 완료

| 작업 | 상태 |
|------|------|
| Vercel 환경변수 (SUPABASE_URL, SUPABASE_ANON_KEY, JWT_SECRET) | ✅ |
| Supabase 테이블 생성 | ✅ |
| GitHub Secrets (7개 - 데이터 수집용) | ✅ |

---

## 2. GitHub Actions - 데이터 수집 자동화

### 스케줄
- **축제/맛집**: 매월 1일, 16일 09:00 KST
- **날씨**: 매일 15:00 KST

### GitHub Secrets (7개)

| Secret | 용도 |
|--------|------|
| `SEOUL_API_KEY` | 서울 열린데이터 API |
| `NAVER_CLIENT_ID` | 네이버 검색 API |
| `NAVER_CLIENT_SECRET` | 네이버 검색 API |
| `GOOGLE_PLACES_API_KEY` | Google Places API |
| `KMA_API_KEY` | 기상청 API |
| `SUPABASE_URL` | Supabase URL |
| `SUPABASE_SERVICE_KEY` | Supabase service key |

---

## 3. 오늘 수정한 빌드 에러

### 원인: Windows와 Linux 파일 시스템 차이
- Windows: 대소문자 무시
- Vercel(Linux): 대소문자 구분

### 수정된 파일

| 파일 | 수정 내용 |
|------|----------|
| `src/atoms/backButton.tsx` | → `BackButton.tsx` 파일명 변경 |
| `src/lib/api.ts` | parameter property 문법 수정 |
| `src/components/ChalkboardCommentSection.tsx` | 미사용 변수 처리 (`_festivalId`) |
| `src/components/GridButtonGroup.tsx` | 상대 경로 → 절대 경로 |
| `src/components/WeatherLocation.tsx` | 상대 경로 → 절대 경로 |
| `src/hooks/useSvgMapOverlays.ts` | 상대 경로 → 절대 경로 |
| `src/utils/naverMap.ts` | `MarkerIcon` 타입 제거 |

---

## 4. 남은 작업

### 배포 완료를 위해
```bash
# 로컬에서 빌드 테스트
pnpm run build

# 에러 없으면 push
git add .
git commit -m "fix: Vercel 빌드 에러 수정"
git push
```

### Vercel 자동 배포
GitHub에 push하면 Vercel이 자동으로 배포 진행

---

## 5. 참고 사항

### `.env` 파일 vs GitHub Secrets
- `py_scripts/.env`: 로컬 개발용
- GitHub Secrets: GitHub Actions 자동 실행용 (웹사이트에서 설정)

### 경로 alias 설정
- `@/` → `src/`
- `@atoms/` → `src/atoms/`
- `@components/` → `src/components/`
- `@constants/` → `src/constants/`
- `@hooks/` → `src/hooks/`
- `@utils/` → `src/utils/`
- 등 (`vite.config.ts`, `tsconfig.app.json` 참조)
