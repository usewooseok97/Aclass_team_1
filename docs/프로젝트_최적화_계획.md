# Seoul Festival Map - SEO / 웹접근성 / 성능 / 코드 최적화 계획

## 분석 요약

| 카테고리 | 현재 상태 | 우선순위 |
|---------|----------|---------|
| SEO | 심각 - 메타태그 없음 | 긴급 |
| 웹접근성 | 중등도 - aria 속성 부족 | 긴급 |
| 성능 | 개선 필요 - lazy loading 없음 | 단기 |
| 코드 최적화 | 양호 - 중복 코드 존재 | 중기 |

---

# 1. SEO (검색엔진최적화)

## 현재 문제점

### index.html
```html
<!-- 현재 상태 -->
<html lang="en">  <!-- ❌ 한국 사이트인데 영어 -->
<title>seoulfestivalmap</title>  <!-- ❌ 가독성 낮음 -->
<!-- ❌ description, keywords 없음 -->
<!-- ❌ Open Graph 태그 없음 -->
```

### 누락 파일
- ❌ `robots.txt` 없음
- ❌ `sitemap.xml` 없음
- ❌ 동적 메타태그 처리 없음 (react-helmet 미사용)

## 개선 방안

### 1-1. index.html 수정

```html
<!doctype html>
<html lang="ko">
  <head>
    <meta charset="UTF-8" />
    <link rel="icon" type="image/svg+xml" href="/favicon.svg" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />

    <!-- 기본 메타태그 -->
    <title>서울 축제 지도 | Seoul Festival Map</title>
    <meta name="description" content="서울의 모든 축제를 한눈에! 축제 위치, 주변 맛집, 날씨 정보를 확인하세요." />
    <meta name="keywords" content="서울 축제, 축제 지도, 서울 행사, 문화 행사, 축제 일정" />
    <meta name="author" content="Seoul Festival Map" />

    <!-- Open Graph (Facebook, KakaoTalk 등) -->
    <meta property="og:type" content="website" />
    <meta property="og:title" content="서울 축제 지도" />
    <meta property="og:description" content="서울의 모든 축제를 한눈에! 위치, 맛집, 날씨 정보 제공" />
    <meta property="og:image" content="/og-image.png" />
    <meta property="og:url" content="https://seoulfestivalmap.com" />
    <meta property="og:locale" content="ko_KR" />

    <!-- Twitter Card -->
    <meta name="twitter:card" content="summary_large_image" />
    <meta name="twitter:title" content="서울 축제 지도" />
    <meta name="twitter:description" content="서울의 모든 축제를 한눈에!" />
    <meta name="twitter:image" content="/og-image.png" />

    <!-- 네이버 웹마스터 -->
    <meta name="naver-site-verification" content="인증코드" />
  </head>
  <body>
    <div id="root"></div>
    <script type="module" src="/src/main.tsx"></script>
  </body>
</html>
```

### 1-2. robots.txt 생성

```txt
# public/robots.txt
User-agent: *
Allow: /

Sitemap: https://seoulfestivalmap.com/sitemap.xml
```

### 1-3. sitemap.xml 생성

```xml
<!-- public/sitemap.xml -->
<?xml version="1.0" encoding="UTF-8"?>
<urlset xmlns="http://www.sitemaps.org/schemas/sitemap/0.9">
  <url>
    <loc>https://seoulfestivalmap.com/</loc>
    <lastmod>2026-01-26</lastmod>
    <changefreq>daily</changefreq>
    <priority>1.0</priority>
  </url>
</urlset>
```

### 1-4. 시맨틱 HTML 개선

**수정할 파일:** `src/App.tsx`, `src/containers/*.tsx`

```tsx
// App.tsx 개선
<main className="...">
  <header>
    <h1 className="sr-only">서울 축제 지도</h1>
  </header>
  <nav aria-label="지역 선택">
    {/* 구 버튼들 */}
  </nav>
  <section aria-label="축제 목록">
    {/* 축제 카드들 */}
  </section>
  <article aria-label="축제 상세 정보">
    {/* 상세 페이지 */}
  </article>
</main>
```

---

# 2. 웹접근성 (a11y)

## 현재 문제점

- ❌ 아이콘에 aria-label 없음
- ❌ 버튼 상태(aria-pressed) 미설정
- ❌ 키보드 네비게이션 미지원
- ❌ 포커스 표시 스타일 없음
- ❌ 배경 이미지 대체 텍스트 없음

## 개선 방안

### 2-1. GuButtonContainer.tsx 개선

```tsx
// 현재
<motion.button onClick={handleClick}>
  <span>{guName}</span>
</motion.button>

// 개선
<motion.button
  onClick={handleClick}
  aria-label={`${guName} 지역 축제 보기`}
  aria-pressed={isActive}
  role="tab"
>
  <span aria-hidden="true">{guName}</span>
</motion.button>
```

### 2-2. Pictures.tsx 개선

```tsx
// 현재 - 배경 이미지로 alt 없음
<div style={{ backgroundImage: `url(${backgroundImg})` }} />

// 개선 - img 태그 사용
<img
  src={backgroundImg}
  alt={alt || "축제 이미지"}
  className="w-full h-full object-cover rounded-[20px]"
  loading="lazy"
/>
```

### 2-3. SearchInput.tsx 키보드 네비게이션

```tsx
// 키보드 이벤트 추가
const handleKeyDown = (e: React.KeyboardEvent) => {
  if (!isOpen) return;

  switch (e.key) {
    case 'ArrowDown':
      e.preventDefault();
      setHighlightedIndex(prev =>
        Math.min(prev + 1, results.length - 1)
      );
      break;
    case 'ArrowUp':
      e.preventDefault();
      setHighlightedIndex(prev => Math.max(prev - 1, 0));
      break;
    case 'Enter':
      if (highlightedIndex >= 0) {
        selectItem(results[highlightedIndex]);
      }
      break;
    case 'Escape':
      setIsOpen(false);
      break;
  }
};

// 드롭다운에 ARIA 추가
<ul
  role="listbox"
  aria-label="검색 결과"
  aria-activedescendant={`option-${highlightedIndex}`}
>
  {results.map((item, index) => (
    <li
      key={index}
      id={`option-${index}`}
      role="option"
      aria-selected={index === highlightedIndex}
      tabIndex={-1}
    >
      {item.TITLE}
    </li>
  ))}
</ul>
```

### 2-4. 포커스 스타일 추가

```css
/* src/index.css 또는 tailwind 설정 */
*:focus-visible {
  outline: 2px solid var(--btn-primary);
  outline-offset: 2px;
}

button:focus-visible,
a:focus-visible {
  ring: 2px;
  ring-color: var(--btn-primary);
}
```

### 2-5. 스크린리더 전용 텍스트

```tsx
// 유틸리티 컴포넌트 생성
// src/atoms/ScreenReaderOnly.tsx
export const ScreenReaderOnly = ({ children }: { children: React.ReactNode }) => (
  <span className="sr-only">{children}</span>
);

// 사용 예시
<button>
  <Star className="w-4 h-4" />
  <ScreenReaderOnly>즐겨찾기 추가</ScreenReaderOnly>
</button>
```

---

# 3. 성능 (Performance)

## 현재 문제점

- ❌ 이미지 lazy loading 없음
- ❌ 코드 스플리팅 없음 (모든 컴포넌트 초기 로드)
- ❌ 컴포넌트 메모이제이션 부족
- ⚠️ react-icons + lucide-react 중복 사용

## 개선 방안

### 3-1. 이미지 Lazy Loading

```tsx
// src/atoms/LazyImage.tsx
import { useState, useRef, useEffect } from 'react';

interface LazyImageProps {
  src: string;
  alt: string;
  className?: string;
  placeholder?: string;
}

export const LazyImage = ({ src, alt, className, placeholder }: LazyImageProps) => {
  const [isLoaded, setIsLoaded] = useState(false);
  const [isInView, setIsInView] = useState(false);
  const imgRef = useRef<HTMLImageElement>(null);

  useEffect(() => {
    const observer = new IntersectionObserver(
      ([entry]) => {
        if (entry.isIntersecting) {
          setIsInView(true);
          observer.disconnect();
        }
      },
      { rootMargin: '50px' }
    );

    if (imgRef.current) {
      observer.observe(imgRef.current);
    }

    return () => observer.disconnect();
  }, []);

  return (
    <img
      ref={imgRef}
      src={isInView ? src : placeholder || ''}
      alt={alt}
      className={`${className} ${isLoaded ? 'opacity-100' : 'opacity-0'} transition-opacity`}
      onLoad={() => setIsLoaded(true)}
      loading="lazy"
    />
  );
};
```

### 3-2. 코드 스플리팅

```tsx
// src/App.tsx
import { lazy, Suspense } from 'react';

// 동적 임포트
const FestivalDetailPage = lazy(() =>
  import('@pages/FestivalDetailPage').then(m => ({ default: m.FestivalDetailPage }))
);

const LeftContentDetail = lazy(() =>
  import('@containers/LeftContentDetail')
);

// 사용
<Suspense fallback={<LoadingSpinner />}>
  {viewMode === 'detail' && <FestivalDetailPage />}
</Suspense>
```

### 3-3. 컴포넌트 메모이제이션

```tsx
// FestivalCard 메모이제이션
import { memo } from 'react';

export const FestivalCard = memo(({ festival, onClick }: FestivalCardProps) => {
  // ... 컴포넌트 내용
}, (prevProps, nextProps) => {
  return prevProps.festival.TITLE === nextProps.festival.TITLE;
});

// RestaurantCard 메모이제이션
export const RestaurantCard = memo(({ place, festival }: RestaurantCardProps) => {
  // ... 컴포넌트 내용
});
```

### 3-4. useMemo/useCallback 추가

```tsx
// SearchInput.tsx
const filteredResults = useMemo(() => {
  if (!searchTerm.trim()) return [];

  const term = searchTerm.toLowerCase();
  return allFestivals.filter(f =>
    f.TITLE.toLowerCase().includes(term) ||
    f.PLACE.toLowerCase().includes(term) ||
    f.GUNAME.includes(term)
  ).slice(0, 10);
}, [searchTerm, allFestivals]);

const handleSelect = useCallback((festival: Festival) => {
  navigateToDetail(festival);
  setSearchTerm('');
  setIsOpen(false);
}, [navigateToDetail]);
```

### 3-5. 패키지 정리

```bash
# react-icons 제거 (lucide-react로 통일)
npm uninstall react-icons
```

---

# 4. 코드 최적화

## 현재 문제점

- ❌ 더미 데이터 사용 (RestaurantCard rating)
- ❌ CSS 변수 스타일 중복
- ❌ StarRating 로직 중복
- ⚠️ Container 네이밍 불명확

## 개선 방안

### 4-1. 더미 데이터 제거

```tsx
// RestaurantCard.tsx
// 현재 - 랜덤 평점
const rating = (Math.random() * 1 + 4).toFixed(1);

// 개선 - Place 타입에 rating 추가하거나 제거
interface Place {
  // ... 기존 필드
  rating?: number;  // 실제 평점 데이터
}

// 사용
const rating = place.rating?.toFixed(1) || null;
{rating && <span>{rating}</span>}
```

### 4-2. 스타일 유틸리티 생성

```tsx
// src/utils/styles.ts
export const textStyles = {
  primary: { color: 'var(--text-primary)' },
  secondary: { color: 'var(--text-secondary)' },
} as const;

export const cardStyles = {
  background: { backgroundColor: 'var(--card-bg)' },
  border: { borderColor: 'var(--card-border)', borderWidth: '1px' },
} as const;

// 사용
<p style={textStyles.primary}>텍스트</p>
<div style={{ ...cardStyles.background, ...cardStyles.border }}>카드</div>
```

### 4-3. StarRating 컴포넌트 통합

```tsx
// src/atoms/StarRating.tsx (기존 파일 개선)
interface StarRatingProps {
  score: number;      // 0-100 또는 0-5
  maxScore?: number;  // 기본값 100
  size?: 'sm' | 'md' | 'lg';
  showValue?: boolean;
}

export const StarRating = ({
  score,
  maxScore = 100,
  size = 'sm',
  showValue = false
}: StarRatingProps) => {
  const normalizedScore = (score / maxScore) * 5;
  const fullStars = Math.floor(normalizedScore);
  const hasHalfStar = normalizedScore % 1 >= 0.5;

  const sizeClass = {
    sm: 'w-3.5 h-3.5',
    md: 'w-4 h-4',
    lg: 'w-5 h-5',
  }[size];

  return (
    <div className="flex items-center gap-1" role="img" aria-label={`평점 ${normalizedScore.toFixed(1)}점`}>
      {[...Array(5)].map((_, i) => (
        <Star
          key={i}
          className={`${sizeClass} ${
            i < fullStars
              ? 'text-yellow-400 fill-yellow-400'
              : i === fullStars && hasHalfStar
              ? 'text-yellow-400 fill-yellow-400/50'
              : 'text-gray-300'
          }`}
          aria-hidden="true"
        />
      ))}
      {showValue && (
        <span className="text-xs ml-1">{normalizedScore.toFixed(1)}</span>
      )}
    </div>
  );
};
```

### 4-4. Error Boundary 추가

```tsx
// src/components/ErrorBoundary.tsx
import { Component, ReactNode } from 'react';

interface Props {
  children: ReactNode;
  fallback?: ReactNode;
}

interface State {
  hasError: boolean;
  error?: Error;
}

export class ErrorBoundary extends Component<Props, State> {
  state: State = { hasError: false };

  static getDerivedStateFromError(error: Error): State {
    return { hasError: true, error };
  }

  componentDidCatch(error: Error, errorInfo: React.ErrorInfo) {
    console.error('Error caught:', error, errorInfo);
  }

  render() {
    if (this.state.hasError) {
      return this.props.fallback || (
        <div className="p-4 text-center">
          <h2>문제가 발생했습니다</h2>
          <p>페이지를 새로고침해 주세요.</p>
          <button onClick={() => window.location.reload()}>
            새로고침
          </button>
        </div>
      );
    }

    return this.props.children;
  }
}

// App.tsx에서 사용
<ErrorBoundary>
  <FestivalProvider>
    <App />
  </FestivalProvider>
</ErrorBoundary>
```

---

# 수정할 파일 목록

## 긴급 (1주)

| 파일 | 변경 내용 |
|------|----------|
| `index.html` | 메타태그, OG태그, lang="ko" |
| `public/robots.txt` | 새 파일 생성 |
| `public/sitemap.xml` | 새 파일 생성 |
| `src/containers/GuButtonContainer.tsx` | aria-label, aria-pressed |
| `src/atoms/Pictures.tsx` | img 태그로 변경, alt 추가 |
| `src/components/ErrorBoundary.tsx` | 새 파일 생성 |

## 단기 (2-3주)

| 파일 | 변경 내용 |
|------|----------|
| `src/components/SearchInput.tsx` | 키보드 네비게이션, ARIA |
| `src/atoms/LazyImage.tsx` | 새 파일 생성 |
| `src/App.tsx` | 코드 스플리팅, Suspense |
| `src/index.css` | focus-visible 스타일 |
| `package.json` | react-icons 제거 |

## 중기 (1개월)

| 파일 | 변경 내용 |
|------|----------|
| `src/utils/styles.ts` | 새 파일 생성 |
| `src/atoms/StarRating.tsx` | 통합 리팩토링 |
| `src/components/FestivalCard.tsx` | memo, 스타일 유틸 적용 |
| `src/components/RestaurantCard.tsx` | 더미 데이터 제거 |

---

# 검증 방법

## SEO
```bash
# Lighthouse SEO 점수 확인
npx lighthouse https://localhost:5173 --only-categories=seo

# 메타태그 확인
curl -s https://localhost:5173 | grep -E "<meta|<title"
```

## 웹접근성
```bash
# axe-core로 접근성 검사
npx @axe-core/cli https://localhost:5173

# 키보드 네비게이션 수동 테스트
# Tab 키로 모든 요소 이동 가능한지 확인
```

## 성능
```bash
# Lighthouse Performance 점수
npx lighthouse https://localhost:5173 --only-categories=performance

# 번들 사이즈 분석
npm run build
npx source-map-explorer dist/assets/*.js
```

## 코드 품질
```bash
# TypeScript 타입 체크
npx tsc --noEmit

# ESLint 검사
npm run lint
```
