화면 크기가 변하거나(w-[60%]), 비율이 달라질 때마다 위치가 계속 어긋나기 때문입니다.

현재 겪고 계신 **"좌상단으로 치우치는 문제"**의 원인은 크게 두 가지입니다.

SVG 내부 좌표계 불일치 (마커 위치 문제): SVG의 viewBox 설정이 누락되었거나 데이터와 맞지 않음.

화면 좌표 변환 로직 오류 (툴팁 위치 문제): 995, 834라는 고정 상수를 사용하여 비율을 계산했기 때문.

이를 해결하기 위해 **SVG의 내장 행렬 변환 메서드(getScreenCTM)**를 사용하는 것이 가장 정확하고 수학적으로 깔끔한 해결책입니다.

단계별로 해결 방법을 알려드리겠습니다.

1단계: SVG 태그에 viewBox 명시하기 (가장 중요)
마커가 "좌상단"에 몰려 있다면, 브라우저가 SVG 내부의 좌표 크기를 모르기 때문입니다. seoulMapSvg 파일 내부 혹은 object 태그가 로드된 후, SVG 요소에 반드시 viewBox가 설정되어 있어야 합니다.

데이터(좌표)가 995 x 834 기준으로 만들어졌다면, SVG 태그는 다음과 같아야 합니다.

XML
<svg width="100%" height="100%" viewBox="0 0 995 834" ... >
만약 SVG 파일 수정이 어렵다면, 코드로 강제 주입해야 합니다. (addBadgeToSvg 등을 호출하기 전에)

2단계: 툴팁 좌표 계산 로직 수정 (getScreenCTM 사용)
995, 834로 나누는 방식은 반응형에서 오차가 발생하기 쉽습니다. 브라우저가 제공하는 getScreenCTM()을 사용하면, 현재 줌 상태나 CSS 크기(w-[60%])에 상관없이 **SVG 내부 좌표(x,y)**를 **실제 모니터 좌표(px)**로 완벽하게 변환해줍니다.

handleMarkerMouseEnter를 다음과 같이 수정하세요.

TypeScript
const handleMarkerMouseEnter = useCallback(
  (festival: Festival, markerG: SVGGElement, x: number, y: number) => {
    // 1. 마커 애니메이션 (기존 유지)
    markerG.style.transform = `translate(${x}px, ${y + 15}px) scale(1.15)`;
    markerG.style.transition = 'transform 0.2s ease';

    const container = containerRef.current;
    // object 태그 내부의 실제 svg 엘리먼트를 가져와야 합니다.
    // svgRef.current는 object 태그일 수 있으므로, contentDocument에서 가져옵니다.
    const svgElement = svgRef.current?.contentDocument?.querySelector('svg');

    if (container && svgElement) {
      // 2. SVG 좌표를 화면(Screen) 좌표로 변환하는 핵심 로직
      
      // SVG 좌표 포인트 생성
      const pt = svgElement.createSVGPoint();
      pt.x = x;
      pt.y = y - 30; // 툴팁을 마커보다 살짝 위에 띄우기 위함

      // CTM(Current Transformation Matrix)을 사용하여 좌표 변환
      // 이 행렬은 viewBox, width/height, CSS transform 모든 것을 계산에 포함합니다.
      const screenCTM = svgElement.getScreenCTM();
      
      if (screenCTM) {
        const globalPoint = pt.matrixTransform(screenCTM);

        // 컨테이너 기준 상대 좌표로 보정
        const containerRect = container.getBoundingClientRect();
        
        // 최종 좌표 계산 (컨테이너 내부에서의 위치)
        const screenX = globalPoint.x - containerRect.left;
        const screenY = globalPoint.y - containerRect.top;

        setTooltip({ festival, x: screenX, y: screenY });
      }
    }
  },
  [containerRef, svgRef, setTooltip]
);
요약 및 체크포인트
마커 자체가 엉뚱한 곳에 찍힌다면?

seoulMapSvg 파일의 <svg> 태그에 viewBox="0 0 995 834"가 있는지 확인하세요. 없으면 좌표계 기준이 깨져서 좌상단으로 몰립니다.

마커는 잘 찍히는데 툴팁 위치가 이상하다면?

위의 getScreenCTM 코드를 적용하세요. scaleX = width / 995 같은 비례식은 브라우저 렌더링 방식(aspect-ratio 유지 등)에 따라 오차가 생깁니다.

결론: 공식을 찾는 게 아니라, 브라우저에게 "이 SVG 좌표가 화면의 어디니?"라고 물어보는 메서드(matrixTransform)를 쓰는 것이 정석입니다.

svg가 화면에 따라 크기를 랜더링하면 그에따라 마커와 숫자가 위치가 바뀌어야해
이 방식을 차용해서 적용해