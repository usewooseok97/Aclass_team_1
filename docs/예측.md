# 데이터 흐름 동작 원리 및 성능 예측

## 현재 동작 원리

```
┌─────────────────────────────────────────────────────────────────────────┐
│                        [1] 데이터 수집 단계 (Python)                      │
├─────────────────────────────────────────────────────────────────────────┤
│                                                                         │
│   서울시 API ──┐                                                        │
│                ├──▶ festival.py ──▶ festival_data.json                 │
│   네이버 API ──┘         │                                              │
│                          ▼                                              │
│   네이버 API ────▶ place.py ────▶ place_data.json                       │
│                                                                         │
│   기상청 API ────▶ weather.py ──▶ weather_data.json                     │
│                                                                         │
└─────────────────────────────────────────────────────────────────────────┘
                                   │
                                   ▼ (JSON 파일 저장)
┌─────────────────────────────────────────────────────────────────────────┐
│                        [2] 정적 파일 저장소                              │
├─────────────────────────────────────────────────────────────────────────┤
│                                                                         │
│   public/data/                                                          │
│   ├── festival_data.json   (축제 목록 + buzz_score)                     │
│   ├── place_data.json      (축제별 맛집/카페)                           │
│   └── weather_data.json    (실시간 날씨)                                │
│                                                                         │
└─────────────────────────────────────────────────────────────────────────┘
                                   │
                                   ▼ (fetch 요청)
┌─────────────────────────────────────────────────────────────────────────┐
│                        [3] React 앱 단계                                 │
├─────────────────────────────────────────────────────────────────────────┤
│                                                                         │
│   FestivalContext.tsx                                                   │
│   │                                                                     │
│   ├── useEffect (마운트 시)                                             │
│   │   ├── fetch('/data/festival_data.json')                            │
│   │   ├── fetch('/data/place_data.json')                               │
│   │   └── fetch('/data/weather_data.json')                             │
│   │                                                                     │
│   └── useState로 상태 저장                                              │
│       ├── allFestivals                                                  │
│       ├── allPlaces                                                     │
│       └── weather                                                       │
│                                                                         │
└─────────────────────────────────────────────────────────────────────────┘
                                   │
                                   ▼ (Context 전달)
┌─────────────────────────────────────────────────────────────────────────┐
│                        [4] UI 렌더링                                     │
├─────────────────────────────────────────────────────────────────────────┤
│                                                                         │
│   useFestivalContext() 훅으로 데이터 접근                               │
│   ├── LeftContent.tsx                                                   │
│   ├── RightContent.tsx                                                  │
│   ├── FestivalCard.tsx                                                  │
│   └── ...                                                               │
│                                                                         │
└─────────────────────────────────────────────────────────────────────────┘
```

### 요약
1. **Python 스크립트** → API 호출 → JSON 파싱 → 파일 저장
2. **정적 파일** → public/data/ 폴더에 JSON 저장
3. **React fetch** → 앱 시작 시 JSON 파일 로드
4. **Context** → 전역 상태로 관리 → UI 렌더링

---

## 성능 예측

### 1. 데이터 수집 단계 (Python) - 오프라인

| 항목 | 예상 소요 시간 | 비고 |
|------|---------------|------|
| 축제 API 호출 | 1-2초 | 서울시 API 응답 |
| buzz_score 계산 | 30-60초 | 축제당 네이버 API 1회 × 축제 수 |
| 맛집 검색 | 60-120초 | 축제당 2회(맛집+카페) × 축제 수 |
| 날씨 API | 1-2초 | 단일 요청 |
| **총 예상** | **2-4분** | 축제 50개 기준 |

**영향 없음**: 사용자 접속 전에 미리 실행하므로 UX에 영향 없음

---

### 2. JSON 파일 크기 예측

| 파일 | 예상 크기 | 계산 근거 |
|------|----------|----------|
| festival_data.json | 100-300KB | 축제 50-100개 × 1-3KB/축제 |
| place_data.json | 200-500KB | 축제당 10개 장소 × 500B/장소 |
| weather_data.json | 1KB 미만 | 단일 객체 |
| **총합** | **300KB-800KB** | |

**평가**: 현대 네트워크에서 무시할 수준 (4G에서도 1초 미만)

---

### 3. React 앱 로딩 성능

#### 초기 로딩 (First Load)

| 단계 | 예상 시간 | 조건 |
|------|----------|------|
| JS 번들 로드 | 200-500ms | Vite 빌드 기준 |
| JSON 파일 fetch (3개 병렬) | 50-200ms | 로컬: 10ms, 배포: 50-200ms |
| JSON 파싱 | 10-50ms | 800KB 기준 |
| Context 초기화 | 5-10ms | |
| 첫 렌더링 | 50-100ms | |
| **총 예상** | **300-800ms** | |

**평가**: ✅ 양호 (1초 미만은 좋은 UX)

#### 상호작용 성능

| 동작 | 예상 시간 | 이유 |
|------|----------|------|
| 구 선택 | 즉시 (~16ms) | 이미 메모리에 데이터 있음, 필터링만 수행 |
| 축제 카드 클릭 | 즉시 (~16ms) | Context 상태 변경만 |
| 뒤로가기 | 즉시 (~16ms) | null 설정만 |

**평가**: ✅ 매우 양호 (추가 API 호출 없음)

---

### 4. 잠재적 병목점

#### ⚠️ 주의 필요

| 문제 | 발생 조건 | 영향 | 해결책 |
|------|----------|------|--------|
| 대용량 JSON | 축제 500개+ | 파싱 지연 100ms+ | 페이지네이션, 가상 스크롤 |
| 이미지 로딩 | 고해상도 이미지 다수 | 대역폭 소모 | lazy loading, 이미지 최적화 |
| 메모리 | 모든 데이터 Context 보관 | 메모리 사용량 증가 | 필요시 로드 방식 |

#### ✅ 문제 없음

| 항목 | 이유 |
|------|------|
| API 호출 지연 | 실시간 API 호출 없음 (정적 JSON) |
| 서버 부하 | 정적 파일 서빙만 (CDN 가능) |
| DB 쿼리 | DB 없음 |

---

### 5. 현재 아키텍처 장단점

#### 장점 ✅

| 장점 | 설명 |
|------|------|
| **빠른 응답** | API 호출 없이 정적 파일만 로드 |
| **서버 비용 없음** | 백엔드 서버 불필요 (정적 호스팅만) |
| **오프라인 가능** | JSON 캐시 시 오프라인 동작 가능 |
| **단순한 구조** | 디버깅 용이, 복잡도 낮음 |
| **확장 용이** | Vercel, Netlify 등 무료 배포 가능 |

#### 단점 ⚠️

| 단점 | 설명 | 심각도 |
|------|------|--------|
| **실시간성 부족** | 데이터 갱신 시 Python 재실행 필요 | 낮음 (축제 정보는 자주 안 변함) |
| **수동 갱신** | 자동 스케줄링 없음 | 중간 (cron job으로 해결 가능) |
| **날씨 실시간 X** | 날씨는 실시간이 이상적 | 중간 |

---

### 6. 성능 최적화 권장사항

#### 즉시 적용 가능

```javascript
// 1. JSON 병렬 로딩 (현재 이미 적용됨)
const [festivals, places, weather] = await Promise.all([
  fetch('/data/festival_data.json'),
  fetch('/data/place_data.json'),
  fetch('/data/weather_data.json')
]);

// 2. 이미지 lazy loading
<img loading="lazy" src={festival.MAIN_IMG} />
```

#### 향후 개선 가능

| 개선안 | 효과 | 난이도 |
|--------|------|--------|
| Service Worker 캐싱 | 재방문 시 즉시 로딩 | 중 |
| JSON gzip 압축 | 파일 크기 70% 감소 | 낮음 (서버 설정) |
| 이미지 CDN | 이미지 로딩 속도 향상 | 낮음 |
| 날씨 실시간 API | 날씨만 실시간 호출 | 중 |

---

## 결론

### 현재 아키텍처 성능 평가: ✅ 양호

| 항목 | 점수 | 평가 |
|------|------|------|
| 초기 로딩 | ⭐⭐⭐⭐ | 1초 미만 예상 |
| 상호작용 | ⭐⭐⭐⭐⭐ | 즉각 반응 |
| 확장성 | ⭐⭐⭐ | 데이터 증가 시 주의 필요 |
| 실시간성 | ⭐⭐ | 수동 갱신 필요 |
| 유지보수 | ⭐⭐⭐⭐ | 단순한 구조 |

**총평**: 현재 규모(서울 축제 50-100개)에서는 **성능 문제 없음**.
정적 JSON 방식은 소규모 프로젝트에 적합하며, 서버 비용 없이 빠른 UX 제공 가능.
